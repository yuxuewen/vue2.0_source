{"version":3,"file":"vue.js","sources":["../src/util/index.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["/**\r\n * 判断是否是对象\r\n */\r\nexport function isObject(obj){\r\n    return typeof obj==='object' && obj!==null;\r\n      \r\n}","\r\nexport let newArrayProto=Object.create(Array.prototype);\r\n let oldMethods=Array.prototype;\r\n //需要重写数组的方法 \r\n let methods=[\r\n       'push',\r\n       'pop',\r\n       'unshift',\r\n       'shift',\r\n       'splice',\r\n       'sort',\r\n       'reverst'\r\n ];\r\n methods.forEach((method)=>{\r\n       newArrayProto[method]=function(...args){\r\n              //依然执行原数组原型上的方法\r\n              let result= oldMethods[method].call(this,...args);\r\n              let insered=null,//新增的元素\r\n                  ob=this._ob_\r\n              switch(method){\r\n                   case 'push':\r\n                   case 'unshift':\r\n                       insered=args;\r\n                       break;\r\n                    case 'splice':\r\n                        insered=args.splice(2);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                   \r\n              }\r\n              return result;\r\n       }\r\n })","/**\r\n * 数据观测\r\n */\r\nimport {isObject} from '../util/index.js'\r\nimport {newArrayProto} from './array'\r\n class Observer{\r\n       constructor(data)\r\n       {\r\n            //将 this 挂载在data 上 可以使用ob 调用方法\r\n             Object.defineProperty(data,'_ob_',{\r\n                   enumerable:false,\r\n                   configurable:false,\r\n                   value:this\r\n             })\r\n\r\n             if(data instanceof Array)\r\n             {\r\n                 //数组是 [].__proto__=Array.prototype\r\n                 //更改需要观测数组的原型链\r\n                 data.__proto__=newArrayProto;\r\n                 this.observeArray(data);\r\n             }\r\n             else{\r\n                 //监测对象\r\n                  this.walk(data);\r\n             }\r\n\r\n             \r\n       }\r\n       /**\r\n        * 观测数组\r\n        * @param {*} data \r\n        */\r\n       observeArray(data){\r\n\r\n          for(let i=0;i<data.length;i++)\r\n          {\r\n              observe(data[i])\r\n          }\r\n\r\n       }\r\n       /**\r\n        * 遍历监测对象\r\n        * @param {*} data \r\n        */\r\n       walk(data){\r\n          //  Object.keys 不可遍历不可枚举类型 所以 _ob_ 不会被遍历\r\n         Object.keys(data).forEach(key=>{\r\n             defineReactive(data,key,data[key])\r\n         })\r\n       }\r\n\r\n\r\n }\r\n /**\r\n  * 数据监测\r\n  * @param {*} data \r\n  * @param {*} key \r\n  * @param {*} value \r\n  */\r\n\r\n function defineReactive(data,key,value){\r\n       observe(value);// value 还是对象，递归\r\n       Object.defineProperty(data,key,{\r\n           get(){\r\n               return value;\r\n\r\n           },\r\n           set(newValue){\r\n               if(newValue===value) return;\r\n               //对于赋值的如果是对象 进行响应式监测\r\n               observe(newValue);\r\n           }\r\n       })\r\n\r\n }\r\n /**\r\n  * 观测数据方法\r\n  * @param {*} data \r\n  */\r\n\r\n export function observe(data)\r\n {\r\n       //不是对象\r\n       if(!isObject(data)) return;\r\n       //说明已经被观测\r\n       if(data._ob_ instanceof Observer) return;\r\n       return new Observer(data);\r\n }\r\n\r\n","\r\nimport {observe} from './observe/index.js'\r\nexport let initState=(vm)=>{\r\n     initData(vm)\r\n       \r\n}\r\n\r\nfunction initData(vm){\r\n    const options=vm.$options;\r\n    if(options.data)\r\n    {\r\n        // 如果 data 是函数得到函数执行的返回值\r\n        let  data=typeof options.data==='function'?(options.data).call(vm):options.data;\r\n        console.log(`需要观测的值${data.toString()}`);\r\n        console.log(data)\r\n        vm._data=data;\r\n        observe(data)\r\n    }\r\n     \r\n       \r\n}","/**\r\n * 初始化\r\n */\r\nimport {initState} from './state.js';\r\n export let  initMixin=(Vue)=>{\r\n        /**\r\n         * 在原型上添加初始化的方法\r\n         */\r\n        Vue.prototype._init=function(options){\r\n             const vm=this;\r\n             //将参数挂载到 vm 上\r\n             vm.$options=options;\r\n             initState(vm);\r\n        }\r\n        \r\n  }\r\n","import { initMixin } from \"./init\";\r\n\r\n/**\r\n * vue 入口文件\r\n * @param {*} options \r\n */\r\nfunction Vue(options){\r\n    this._init(options);\r\n\r\n}\r\n//扩展 Vue方法\r\ninitMixin(Vue);\r\nexport default Vue;"],"names":["isObject","obj","newArrayProto","Object","create","Array","prototype","oldMethods","methods","forEach","method","args","result","call","insered","ob","_ob_","splice","Observer","data","defineProperty","enumerable","configurable","value","__proto__","observeArray","walk","i","length","observe","keys","key","defineReactive","get","set","newValue","initState","vm","initData","options","$options","console","log","toString","_data","initMixin","Vue","_init"],"mappings":"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"}